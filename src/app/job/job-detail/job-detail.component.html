<!-- Job details Table -->
<div class="card" *ngIf="job">
  <div class="p-datatable-gridlines p-datatable">
    <table class="p-datatable-table">
      <tbody class="p-datatable-tbody">

        <!--  name line  -->
        <tr *ngIf="job.name">
          <td class="font-semibold">Name:</td>
          <td>{{job.name}}</td>
        </tr>

        <!--  creationDate line  -->
        <tr *ngIf=" job.creationDate">
          <td  class="font-semibold">Creation date:</td>
          <td>{{job.creationDate | date}}</td>
        </tr>

        <!--  status line  -->
        <tr *ngIf="job.status">
          <td class="font-semibold">Status:</td>
          <td>{{job.status}}</td>
        </tr>

        <!--  owner line  -->
        <tr *ngIf="job.owner">
          <td class="font-semibold">Owner:</td>
          <td>{{job.owner}}</td>
        </tr>

        <!--  workflow name line  -->
        <tr *ngIf="workflow">
          <td class="font-semibold">Workflow Name:</td>
          <td>
            <a routerLink="/workflows/detail/{{workflow.id}}" (click)="modalReference.close()">{{workflow.name}}</a>
          </td>
        </tr>

        <!--  plugin name line  -->
        <tr *ngIf="plugin">
          <td class="font-semibold">Plugin:</td>
          <td>
            <a routerLink="/plugins/{{plugin.id}}" (click)="modalReference.close()">{{plugin.name}}:{{plugin.version}}</a>
          </td>
        </tr>

        <!--  startTime line  -->
        <tr *ngIf="job.startTime">
          <td class="font-semibold">Start time:
          <td>{{job.startTime}}</td>
        </tr>

        <!--  endTime line  -->
        <tr *ngIf="job.endTime">
          <td class="font-semibold">End time:</td>
          <td>{{job.endTime}}</td>
        </tr>

        <!--  runningTime line  -->
        <tr *ngIf="job.runningTime">
          <td class="font-semibold">Running time:</td>
          <td>{{job.runningTime}}</td>
        </tr>

        <!--  wippVersion line  -->
        <tr *ngIf="job.wippVersion">
          <td class="font-semibold">Computed in version:</td>
          <td>{{job.wippVersion}}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<!--Input Table -->
<div class="modal-header" (click)="showInputs = !showInputs">
  <h4 class="modal-title" id="modal-basic-title2">
    <span class="glyphicon glyphicon-star"></span>
    Inputs
    <i class="fas fa-caret-down"></i>
  </h4>
</div>
<div class="modal-body top20" *ngIf="job && showInputs">
  <table class="table table-bordered">

    <!--  input id or name line -->
    <tr *ngFor="let input of plugin.inputs; let i = index">
      <th *ngIf="job.parameters[input['name']]">
        <dt>
          {{input['name']}}
        </dt>
      </th>
      <td *ngIf="job.parameters[input['name']]">
        <dd class="col-md-8 breakLine" (click)="modalReference.close()">
          <span *ngIf="!job.parameters[input['name']].includes('{{');then flatInput else linkedInput"></span>
        </dd>
      </td>
      <ng-template #flatInput>
        <app-dynamic-content type="{{input['type']}}"
                             idData="{{job.parameters[input['name']]}}"
                             defaultText="{{job.parameters[input['name']]}}">
        </app-dynamic-content>
      </ng-template>
      <ng-template #linkedInput>
        <app-dynamic-content type="{{input['type']}}"
                             idData="{{outputHash[inputOrigins[i]]}}"
                             defaultText="{{inputOrigins[i]}}">
        </app-dynamic-content>
      </ng-template>
    </tr>

  </table>
</div>

<!--Output Table -->
<div class="modal-header" (click)="showOutputs = !showOutputs">
  <h4 class="modal-title" id="modal-basic-title3">
    <span class="glyphicon glyphicon-star"></span>
    Outputs
    <i class="fas fa-caret-down"></i>
  </h4>
</div>
<div class="modal-body top20" *ngIf="job && showOutputs">
  <table class="table table-bordered">

    <!--  output name line  -->
    <tr *ngFor="let output of plugin.outputs">
      <th>
        <dt>{{output['type']}}
        </dt>
      </th>
      <td>
        <dd class="col-md-8 breakLine" (click)="modalReference.close()">
          <app-dynamic-content type="{{output['type']}}"
                               jobId="{{job.id}}"
                               idData="{{job.outputParameters[output['name']]}}"
                               defaultText="{{job.name}}-{{output['name']}}">
          </app-dynamic-content>
        </dd>
      </td>
    </tr>

  </table>
</div>
